{"messageVersion": "1.0", "response": {"actionGroup": "daisy_in_action", "apiPath": "/tools/amadeus/search", "httpMethod": "POST", "httpStatusCode": 200, "responseBody": {"application/json": {"body": "{\"generatedAt\": \"2025-10-17T17:46:26Z\", \"query\": {\"origin\": \"FRA\", \"destination\": \"BCN\", \"departureDate\": \"2025-11-15\", \"returnDate\": null, \"adults\": 1, \"cabin\": \"ECONOMY\", \"nonstop\": false, \"currency\": \"EUR\", \"lhGroupOnly\": true, \"max\": 3}, \"offers\": [{\"id\": \"1\", \"oneWay\": null, \"totalPrice\": \"131.89\", \"currency\": \"EUR\", \"carriers\": [\"UX\"], \"segments\": [{\"carrier\": \"UX\", \"marketingCarrier\": null, \"operatingCarrier\": null, \"flightNumber\": \"1502\", \"aircraft\": \"7S8\", \"cabin\": null, \"fareClass\": null, \"from\": \"FRA\", \"fromTerminal\": null, \"departureTime\": \"2025-11-15T10:45:00\", \"to\": \"MAD\", \"toTerminal\": null, \"arrivalTime\": \"2025-11-15T13:35:00\", \"duration\": \"PT2H50M\", \"mileage\": null, \"stops\": null, \"layoverDuration\": null, \"services\": []}, {\"carrier\": \"UX\", \"marketingCarrier\": null, \"operatingCarrier\": null, \"flightNumber\": \"7703\", \"aircraft\": \"789\", \"cabin\": null, \"fareClass\": null, \"from\": \"MAD\", \"fromTerminal\": null, \"departureTime\": \"2025-11-15T15:10:00\", \"to\": \"BCN\", \"toTerminal\": null, \"arrivalTime\": \"2025-11-15T16:35:00\", \"duration\": \"PT1H25M\", \"mileage\": null, \"stops\": null, \"layoverDuration\": null, \"services\": []}], \"itineraries\": [{\"duration\": \"PT5H50M\", \"segments\": [{\"carrier\": \"UX\", \"marketingCarrier\": null, \"operatingCarrier\": null, \"flightNumber\": \"1502\", \"aircraft\": \"7S8\", \"cabin\": null, \"fareClass\": null, \"from\": \"FRA\", \"fromTerminal\": null, \"departureTime\": \"2025-11-15T10:45:00\", \"to\": \"MAD\", \"toTerminal\": null, \"arrivalTime\": \"2025-11-15T13:35:00\", \"duration\": \"PT2H50M\", \"mileage\": null, \"stops\": null, \"layoverDuration\": null, \"services\": []}, {\"carrier\": \"UX\", \"marketingCarrier\": null, \"operatingCarrier\": null, \"flightNumber\": \"7703\", \"aircraft\": \"789\", \"cabin\": null, \"fareClass\": null, \"from\": \"MAD\", \"fromTerminal\": null, \"departureTime\": \"2025-11-15T15:10:00\", \"to\": \"BCN\", \"toTerminal\": null, \"arrivalTime\": \"2025-11-15T16:35:00\", \"duration\": \"PT1H25M\", \"mileage\": null, \"stops\": null, \"layoverDuration\": null, \"services\": []}]}], \"primaryCarrier\": \"UX\", \"departureAirport\": \"FRA\", \"departureTime\": \"2025-11-15T10:45:00\", \"arrivalAirport\": \"BCN\", \"arrivalTime\": \"2025-11-15T16:35:00\", \"duration\": \"PT5H50M\", \"stops\": 1}, {\"id\": \"2\", \"oneWay\": null, \"totalPrice\": \"139.41\", \"currency\": \"EUR\", \"carriers\": [\"UX\"], \"segments\": [{\"carrier\": \"UX\", \"marketingCarrier\": null, \"operatingCarrier\": null, \"flightNumber\": \"1506\", \"aircraft\": \"7S8\", \"cabin\": null, \"fareClass\": null, \"from\": \"FRA\", \"fromTerminal\": null, \"departureTime\": \"2025-11-15T19:05:00\", \"to\": \"MAD\", \"toTerminal\": null, \"arrivalTime\": \"2025-11-15T21:55:00\", \"duration\": \"PT2H50M\", \"mileage\": null, \"stops\": null, \"layoverDuration\": null, \"services\": []}, {\"carrier\": \"UX\", \"marketingCarrier\": null, \"operatingCarrier\": null, \"flightNumber\": \"7703\", \"aircraft\": \"787\", \"cabin\": null, \"fareClass\": null, \"from\": \"MAD\", \"fromTerminal\": null, \"departureTime\": \"2025-11-16T15:10:00\", \"to\": \"BCN\", \"toTerminal\": null, \"arrivalTime\": \"2025-11-16T16:35:00\", \"duration\": \"PT1H25M\", \"mileage\": null, \"stops\": null, \"layoverDuration\": null, \"services\": []}], \"itineraries\": [{\"duration\": \"PT21H30M\", \"segments\": [{\"carrier\": \"UX\", \"marketingCarrier\": null, \"operatingCarrier\": null, \"flightNumber\": \"1506\", \"aircraft\": \"7S8\", \"cabin\": null, \"fareClass\": null, \"from\": \"FRA\", \"fromTerminal\": null, \"departureTime\": \"2025-11-15T19:05:00\", \"to\": \"MAD\", \"toTerminal\": null, \"arrivalTime\": \"2025-11-15T21:55:00\", \"duration\": \"PT2H50M\", \"mileage\": null, \"stops\": null, \"layoverDuration\": null, \"services\": []}, {\"carrier\": \"UX\", \"marketingCarrier\": null, \"operatingCarrier\": null, \"flightNumber\": \"7703\", \"aircraft\": \"787\", \"cabin\": null, \"fareClass\": null, \"from\": \"MAD\", \"fromTerminal\": null, \"departureTime\": \"2025-11-16T15:10:00\", \"to\": \"BCN\", \"toTerminal\": null, \"arrivalTime\": \"2025-11-16T16:35:00\", \"duration\": \"PT1H25M\", \"mileage\": null, \"stops\": null, \"layoverDuration\": null, \"services\": []}]}], \"primaryCarrier\": \"UX\", \"departureAirport\": \"FRA\", \"departureTime\": \"2025-11-15T19:05:00\", \"arrivalAirport\": \"BCN\", \"arrivalTime\": \"2025-11-16T16:35:00\", \"duration\": \"PT21H30M\", \"stops\": 1}, {\"id\": \"3\", \"oneWay\": null, \"totalPrice\": \"143.78\", \"currency\": \"EUR\", \"carriers\": [\"KL\"], \"segments\": [{\"carrier\": \"KL\", \"marketingCarrier\": null, \"operatingCarrier\": null, \"flightNumber\": \"1818\", \"aircraft\": \"295\", \"cabin\": null, \"fareClass\": null, \"from\": \"FRA\", \"fromTerminal\": null, \"departureTime\": \"2025-11-15T11:50:00\", \"to\": \"AMS\", \"toTerminal\": null, \"arrivalTime\": \"2025-11-15T13:05:00\", \"duration\": \"PT1H15M\", \"mileage\": null, \"stops\": null, \"layoverDuration\": null, \"services\": []}, {\"carrier\": \"KL\", \"marketingCarrier\": null, \"operatingCarrier\": null, \"flightNumber\": \"1519\", \"aircraft\": \"73H\", \"cabin\": null, \"fareClass\": null, \"from\": \"AMS\", \"fromTerminal\": null, \"departureTime\": \"2025-11-15T16:55:00\", \"to\": \"BCN\", \"toTerminal\": null, \"arrivalTime\": \"2025-11-15T19:05:00\", \"duration\": \"PT2H10M\", \"mileage\": null, \"stops\": null, \"layoverDuration\": null, \"services\": []}], \"itineraries\": [{\"duration\": \"PT7H15M\", \"segments\": [{\"carrier\": \"KL\", \"marketingCarrier\": null, \"operatingCarrier\": null, \"flightNumber\": \"1818\", \"aircraft\": \"295\", \"cabin\": null, \"fareClass\": null, \"from\": \"FRA\", \"fromTerminal\": null, \"departureTime\": \"2025-11-15T11:50:00\", \"to\": \"AMS\", \"toTerminal\": null, \"arrivalTime\": \"2025-11-15T13:05:00\", \"duration\": \"PT1H15M\", \"mileage\": null, \"stops\": null, \"layoverDuration\": null, \"services\": []}, {\"carrier\": \"KL\", \"marketingCarrier\": null, \"operatingCarrier\": null, \"flightNumber\": \"1519\", \"aircraft\": \"73H\", \"cabin\": null, \"fareClass\": null, \"from\": \"AMS\", \"fromTerminal\": null, \"departureTime\": \"2025-11-15T16:55:00\", \"to\": \"BCN\", \"toTerminal\": null, \"arrivalTime\": \"2025-11-15T19:05:00\", \"duration\": \"PT2H10M\", \"mileage\": null, \"stops\": null, \"layoverDuration\": null, \"services\": []}]}], \"primaryCarrier\": \"KL\", \"departureAirport\": \"FRA\", \"departureTime\": \"2025-11-15T11:50:00\", \"arrivalAirport\": \"BCN\", \"arrivalTime\": \"2025-11-15T19:05:00\", \"duration\": \"PT7H15M\", \"stops\": 1}], \"provider\": \"Amadeus Flight Offers Search v2\", \"debugLog\": [{\"time\": \"2025-10-17T17:46:23Z\", \"message\": \"Lambda invocation started\", \"details\": {\"event_keys\": \"[\\\"messageVersion\\\", \\\"actionGroup\\\", \\\"apiPath\\\", \\\"httpMethod\\\", \\\"sessionId\\\", \\\"agent\\\", \\\"sessionAttributes\\\", \\\"promptSessionAttributes\\\", \\\"parameters\\\", \\\"requestBody\\\"]\", \"has_context\": \"True\"}}, {\"time\": \"2025-10-17T17:46:23Z\", \"message\": \"Routing to OpenAPI handler\"}, {\"time\": \"2025-10-17T17:46:23Z\", \"message\": \"Handling OpenAPI event\", \"details\": {\"api_path\": \"/tools/amadeus/search\"}}, {\"time\": \"2025-10-17T17:46:23Z\", \"message\": \"OpenAPI request body parsed\", \"details\": {\"keys\": \"[\\\"originLocationCode\\\", \\\"destinationLocationCode\\\", \\\"departureDate\\\", \\\"adults\\\", \\\"travelClass\\\", \\\"max\\\", \\\"currencyCode\\\"]\"}}, {\"time\": \"2025-10-17T17:46:23Z\", \"message\": \"OpenAPI normalized flight fields\", \"details\": {\"normalized\": \"{\\\"origin\\\": \\\"FRA\\\", \\\"destination\\\": \\\"BCN\\\", \\\"departureDate\\\": \\\"2025-11-15\\\", \\\"adults\\\": \\\"1\\\", \\\"cabin\\\": \\\"ECONOMY\\\", \\\"currency\\\": \\\"EUR\\\", \\\"max\\\": \\\"3\\\"}\"}}, {\"time\": \"2025-10-17T17:46:23Z\", \"message\": \"Resolve IATA: attempting normalization\", \"details\": {\"raw\": \"FRA\"}}, {\"time\": \"2025-10-17T17:46:23Z\", \"message\": \"Resolve IATA: normalized successfully\", \"details\": {\"code\": \"FRA\"}}, {\"time\": \"2025-10-17T17:46:23Z\", \"message\": \"Resolve IATA: attempting normalization\", \"details\": {\"raw\": \"BCN\"}}, {\"time\": \"2025-10-17T17:46:23Z\", \"message\": \"Resolve IATA: normalized successfully\", \"details\": {\"code\": \"BCN\"}}, {\"time\": \"2025-10-17T17:46:23Z\", \"message\": \"OpenAPI flight request prepared\", \"details\": {\"origin\": \"FRA\", \"destination\": \"BCN\", \"departureDate\": \"2025-11-15\", \"adults\": \"1\", \"nonstop\": \"False\", \"cabin\": \"ECONOMY\", \"currency\": \"EUR\", \"lhGroupOnly\": \"True\", \"max\": \"3\"}}, {\"time\": \"2025-10-17T17:46:23Z\", \"message\": \"Validate booking window\", \"details\": {\"departure\": \"2025-11-15\"}}, {\"time\": \"2025-10-17T17:46:23Z\", \"message\": \"Validate booking window passed\", \"details\": {\"departure\": \"2025-11-15\"}}, {\"time\": \"2025-10-17T17:46:23Z\", \"message\": \"Amadeus search request prepared\", \"details\": {\"origin\": \"FRA\", \"destination\": \"BCN\", \"departure\": \"2025-11-15\", \"adults\": \"1\", \"nonstop\": \"False\", \"cabin\": \"ECONOMY\", \"currency\": \"EUR\", \"lhGroupOnly\": \"True\", \"maxResults\": \"3\"}}, {\"time\": \"2025-10-17T17:46:23Z\", \"message\": \"Proxy POST request\", \"details\": {\"path\": \"/tools/amadeus/search\", \"url\": \"https://origin-daisy.onrender.com/tools/amadeus/search\", \"timeout\": \"8.0\", \"payload\": \"{\\\"originLocationCode\\\": \\\"FRA\\\", \\\"destinationLocationCode\\\": \\\"BCN\\\", \\\"departureDate\\\": \\\"2025-11-15\\\", \\\"adults\\\": 1, \\\"nonStop\\\": false, \\\"max\\\": 3, \\\"travelClass\\\": \\\"ECONOMY\\\", \\\"currencyCode\\\": \\\"EUR\\\", \\\"includedAirlineCodes\\\": \\\"LH,LX,OS,SN,EW,4Y,EN\\\"}\"}}, {\"time\": \"2025-10-17T17:46:26Z\", \"message\": \"Proxy POST response received\", \"details\": {\"path\": \"/tools/amadeus/search\", \"status\": \"200\", \"bytes\": \"11918\"}}, {\"time\": \"2025-10-17T17:46:26Z\", \"message\": \"Amadeus search completed\", \"details\": {\"offers\": \"3\"}}, {\"time\": \"2025-10-17T17:46:26Z\", \"message\": \"Summarizing offers\", \"details\": {\"keys\": \"[\\\"offers\\\", \\\"raw\\\"]\", \"currency_hint\": \"EUR\"}}, {\"time\": \"2025-10-17T17:46:26Z\", \"message\": \"Summarized offers (modern payload)\", \"details\": {\"count\": \"3\"}}, {\"time\": \"2025-10-17T17:46:26Z\", \"message\": \"OpenAPI flight search success\", \"details\": {\"origin\": \"FRA\", \"destination\": \"BCN\", \"offers\": \"3\"}}], \"debugLogText\": \"2025-10-17T17:46:23Z - Lambda invocation started | {\\\"event_keys\\\": \\\"[\\\\\\\"messageVersion\\\\\\\", \\\\\\\"actionGroup\\\\\\\", \\\\\\\"apiPath\\\\\\\", \\\\\\\"httpMethod\\\\\\\", \\\\\\\"sessionId\\\\\\\", \\\\\\\"agent\\\\\\\", \\\\\\\"sessionAttributes\\\\\\\", \\\\\\\"promptSessionAttributes\\\\\\\", \\\\\\\"parameters\\\\\\\", \\\\\\\"requestBody\\\\\\\"]\\\", \\\"has_context\\\": \\\"True\\\"}\\n2025-10-17T17:46:23Z - Routing to OpenAPI handler\\n2025-10-17T17:46:23Z - Handling OpenAPI event | {\\\"api_path\\\": \\\"/tools/amadeus/search\\\"}\\n2025-10-17T17:46:23Z - OpenAPI request body parsed | {\\\"keys\\\": \\\"[\\\\\\\"originLocationCode\\\\\\\", \\\\\\\"destinationLocationCode\\\\\\\", \\\\\\\"departureDate\\\\\\\", \\\\\\\"adults\\\\\\\", \\\\\\\"travelClass\\\\\\\", \\\\\\\"max\\\\\\\", \\\\\\\"currencyCode\\\\\\\"]\\\"}\\n2025-10-17T17:46:23Z - OpenAPI normalized flight fields | {\\\"normalized\\\": \\\"{\\\\\\\"origin\\\\\\\": \\\\\\\"FRA\\\\\\\", \\\\\\\"destination\\\\\\\": \\\\\\\"BCN\\\\\\\", \\\\\\\"departureDate\\\\\\\": \\\\\\\"2025-11-15\\\\\\\", \\\\\\\"adults\\\\\\\": \\\\\\\"1\\\\\\\", \\\\\\\"cabin\\\\\\\": \\\\\\\"ECONOMY\\\\\\\", \\\\\\\"currency\\\\\\\": \\\\\\\"EUR\\\\\\\", \\\\\\\"max\\\\\\\": \\\\\\\"3\\\\\\\"}\\\"}\\n2025-10-17T17:46:23Z - Resolve IATA: attempting normalization | {\\\"raw\\\": \\\"FRA\\\"}\\n2025-10-17T17:46:23Z - Resolve IATA: normalized successfully | {\\\"code\\\": \\\"FRA\\\"}\\n2025-10-17T17:46:23Z - Resolve IATA: attempting normalization | {\\\"raw\\\": \\\"BCN\\\"}\\n2025-10-17T17:46:23Z - Resolve IATA: normalized successfully | {\\\"code\\\": \\\"BCN\\\"}\\n2025-10-17T17:46:23Z - OpenAPI flight request prepared | {\\\"origin\\\": \\\"FRA\\\", \\\"destination\\\": \\\"BCN\\\", \\\"departureDate\\\": \\\"2025-11-15\\\", \\\"adults\\\": \\\"1\\\", \\\"nonstop\\\": \\\"False\\\", \\\"cabin\\\": \\\"ECONOMY\\\", \\\"currency\\\": \\\"EUR\\\", \\\"lhGroupOnly\\\": \\\"True\\\", \\\"max\\\": \\\"3\\\"}\\n2025-10-17T17:46:23Z - Validate booking window | {\\\"departure\\\": \\\"2025-11-15\\\"}\\n2025-10-17T17:46:23Z - Validate booking window passed | {\\\"departure\\\": \\\"2025-11-15\\\"}\\n2025-10-17T17:46:23Z - Amadeus search request prepared | {\\\"origin\\\": \\\"FRA\\\", \\\"destination\\\": \\\"BCN\\\", \\\"departure\\\": \\\"2025-11-15\\\", \\\"adults\\\": \\\"1\\\", \\\"nonstop\\\": \\\"False\\\", \\\"cabin\\\": \\\"ECONOMY\\\", \\\"currency\\\": \\\"EUR\\\", \\\"lhGroupOnly\\\": \\\"True\\\", \\\"maxResults\\\": \\\"3\\\"}\\n2025-10-17T17:46:23Z - Proxy POST request | {\\\"path\\\": \\\"/tools/amadeus/search\\\", \\\"url\\\": \\\"https://origin-daisy.onrender.com/tools/amadeus/search\\\", \\\"timeout\\\": \\\"8.0\\\", \\\"payload\\\": \\\"{\\\\\\\"originLocationCode\\\\\\\": \\\\\\\"FRA\\\\\\\", \\\\\\\"destinationLocationCode\\\\\\\": \\\\\\\"BCN\\\\\\\", \\\\\\\"departureDate\\\\\\\": \\\\\\\"2025-11-15\\\\\\\", \\\\\\\"adults\\\\\\\": 1, \\\\\\\"nonStop\\\\\\\": false, \\\\\\\"max\\\\\\\": 3, \\\\\\\"travelClass\\\\\\\": \\\\\\\"ECONOMY\\\\\\\", \\\\\\\"currencyCode\\\\\\\": \\\\\\\"EUR\\\\\\\", \\\\\\\"includedAirlineCodes\\\\\\\": \\\\\\\"LH,LX,OS,SN,EW,4Y,EN\\\\\\\"}\\\"}\\n2025-10-17T17:46:26Z - Proxy POST response received | {\\\"path\\\": \\\"/tools/amadeus/search\\\", \\\"status\\\": \\\"200\\\", \\\"bytes\\\": \\\"11918\\\"}\\n2025-10-17T17:46:26Z - Amadeus search completed | {\\\"offers\\\": \\\"3\\\"}\\n2025-10-17T17:46:26Z - Summarizing offers | {\\\"keys\\\": \\\"[\\\\\\\"offers\\\\\\\", \\\\\\\"raw\\\\\\\"]\\\", \\\"currency_hint\\\": \\\"EUR\\\"}\\n2025-10-17T17:46:26Z - Summarized offers (modern payload) | {\\\"count\\\": \\\"3\\\"}\\n2025-10-17T17:46:26Z - OpenAPI flight search success | {\\\"origin\\\": \\\"FRA\\\", \\\"destination\\\": \\\"BCN\\\", \\\"offers\\\": \\\"3\\\"}\"}"}}}, "sessionAttributes": {}, "promptSessionAttributes": {}}